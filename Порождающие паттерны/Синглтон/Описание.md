
**Singleton** ‚Äî —ç—Ç–æ –ø–æ—Ä–æ–∂–¥–∞—é—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —É –∫–ª–∞—Å—Å–∞ –µ—Å—Ç—å **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä**, –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É.

**‚û°Ô∏è –ê–Ω–∞–ª–æ–≥–∏—è:**  
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –≥–ª–∞–≤–Ω—ã–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å —Å–≤–µ—Ç–∞ –≤ –∑–¥–∞–Ω–∏–∏. –ù–µ–≤–∞–∂–Ω–æ, –∏–∑ –∫–∞–∫–æ–π –∫–æ–º–Ω–∞—Ç—ã –≤—ã –∏–º —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ ‚Äî —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –æ–±—ä–µ–∫—Ç, –≤–ª–∏—è—é—â–∏–π –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É.

## **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**  

‚úÖ –ö–æ–≥–¥–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **—Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** –∫–ª–∞—Å—Å–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –ª–æ–≥–≥–µ—Ä, –∫–µ—à)  
‚úÖ –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ **–≥–ª–æ–±–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** —Ä–µ—Å—É—Ä—Å–æ–º (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)  
‚úÖ –î–ª—è **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞** –∫ –æ–±—â–µ–º—É —Ä–µ—Å—É—Ä—Å—É  

---
## **–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. **–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (—Å –ª–µ–Ω–∏–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π)**

```javascript
class Database {
  private static instance: Database;

  // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
  private constructor() {
    console.log("–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö...");
  }

  // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞
  public static getInstance(): Database {
    if (!Database.instance) {
      Database.instance = new Database();
    }
    return Database.instance;
  }

  public query(sql: string): void {
    console.log(`–í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å: ${sql}`);
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const db1 = Database.getInstance();
const db2 = Database.getInstance();

db1.query("SELECT * FROM users");
console.log(db1 === db2); // true (—ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç)
```

### 2. **Singleton –≤ Node.js (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è)**

```javascript
// logger.js
class Logger {
  constructor() {
    this.logs = [];
  }

  log(message) {
    this.logs.push(message);
    console.log(`[LOG]: ${message}`);
  }
}

// Node.js –∫–µ—à–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏, –ø–æ—ç—Ç–æ–º—É —ç–∫—Å–ø–æ—Ä—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å–æ–∑–¥–∞—Å—Ç —Å–∏–Ω–≥–ª—Ç–æ–Ω
module.exports = new Logger();

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö
const logger = require('./logger');
logger.log('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ'); // –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä
```

### 3. **Singleton —Å Proxy (–¥–ª—è –∑–∞–ø—Ä–µ—Ç–∞ new)**

```javascript
class Config {
  constructor() {
    if (Config.instance) {
      return Config.instance;
    }
    this.settings = {};
    Config.instance = this;
  }
}

// –ó–∞—â–∏—Ç–∞ –æ—Ç new Config()
const SingletonProxy = new Proxy(Config, {
  construct(target, args) {
    if (!target.instance) {
      target.instance = new target(...args);
    }
    return target.instance;
  }
});

const config1 = new SingletonProxy();
const config2 = new SingletonProxy();
console.log(config1 === config2); // true
```

### 4. **Singleton –¥–ª—è –∫–µ—à–∞ (–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä)**

```typescript
class CacheService {
  private static instance: CacheService;
  private cache: Map<string, any>;

  private constructor() {
    this.cache = new Map();
  }

  public static getInstance(): CacheService {
    if (!CacheService.instance) {
      CacheService.instance = new CacheService();
    }
    return CacheService.instance;
  }

  public set(key: string, value: any): void {
    this.cache.set(key, value);
  }

  public get(key: string): any {
    return this.cache.get(key);
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const cache1 = CacheService.getInstance();
const cache2 = CacheService.getInstance();

cache1.set('user', { name: 'Alice' });
console.log(cache2.get('user')); // { name: 'Alice' }
```

---
## **–ü–ª—é—Å—ã –∏ –º–∏–Ω—É—Å—ã**

### ‚úîÔ∏è **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**
- **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –¥–æ—Å—Ç—É–ø** –∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É  
- **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏** (–Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã)  
- **–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞**  

### ‚ùå **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**
- **–ù–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** (—Ä–µ—à–∞–µ—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º + –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É)  
- **–£—Å–ª–æ–∂–Ω—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏–∑-–∑–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è  
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö —Å—Ä–µ–¥–∞—Ö (—Ö–æ—Ç—è JS –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π)  

---
## **–ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω?**  

–°–∏–Ω–≥–ª—Ç–æ–Ω —á–∞—Å—Ç–æ –∫—Ä–∏—Ç–∏–∫—É—é—Ç –∑–∞:  
- **–ñ–µ—Å—Ç–∫—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å** (–∫–ª–∞—Å—Å—ã –∑–Ω–∞—é—Ç –æ —Å–∏–Ω–≥–ª—Ç–æ–Ω–µ)  
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è** –≤ —Ç–µ—Å—Ç–∞—Ö  
- **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä—É–¥–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å  

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**  
- **Dependency Injection** (–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä —è–≤–Ω–æ)  
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤ React** / **–°–µ—Ä–≤–∏—Å—ã –≤ Angular**  

---
## **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ?**  

- **–õ–æ–≥–≥–µ—Ä—ã** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `winston`, `morgan`)  
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î** (Mongoose, Sequelize)  
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**  
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**  
- **Redux Store** (–≤ –º–∏—Ä–µ React)  

---
## **–í—ã–≤–æ–¥**  

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Singleton **–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ**, –∫–æ–≥–¥–∞:  
üîπ **–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** –Ω–∞ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  
üîπ **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** ‚Äî –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∞ –Ω–µ "—É–¥–æ–±–Ω—ã–π —Ö–∞–∫"  
üîπ **–°–æ—Å—Ç–æ—è–Ω–∏–µ** –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –µ–¥–∏–Ω—ã–º  

**–ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:**  

```typescript
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
class AppLogger {
  private static instance: AppLogger;
  private constructor() { /*...*/ }
  
  public static init(config: LoggerConfig) {
    if (!this.instance) {
      this.instance = new AppLogger(config);
    }
    return this.instance;
  }
  
  // ...–º–µ—Ç–æ–¥—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è...
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
AppLogger.init({ level: 'debug' });
```

**–ü–ª–æ—Ö–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π:**

```javascript
// –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω: –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ race condition)
class CurrentUser {
  static instance;
  
  constructor() {
    if (!CurrentUser.instance) {
      this.name = null;
      CurrentUser.instance = this;
    }
    return CurrentUser.instance;
  }
}
```

–°–∏–Ω–≥–ª—Ç–æ–Ω ‚Äî –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ **–Ω–µ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–π—Ç–µ** –∏–º! üöÄ